# Forked from https://github.com/data2health/schemas/blob/master/Dataset/Dataset.yaml
# Schema built on top of https://schema.org/Patient
# Verified structure using:
#

---
# "@context":
#   dct:                 "http://purl.org/dc/terms/"
#   owl:                 "http://www.w3.org/2002/07/owl#"
#   rdf:                 "http://www.w3.org/1999/02/22-rdf-syntax-ns#"
#   rdfa:                "http://www.w3.org/ns/rdfa#"
#   rdfs:                "http://www.w3.org/2000/01/rdf-schema#"
#   schema:              "http://schema.org/"
#   health:              "https://health-lifesci.schema.org/"
#   xsd:                 "http://www.w3.org/2001/XMLSchema#"
#
#   # bsc:               "http://bioschemas.org/"
#   # bts:               "http://schema.biothings.io/"
#   cvisb:               "http://schema.cvisb.org/"
#
# "@id":                 "http://schema.cvisb.org/Patient/0.1"
#
# "@graph":
- "@id":                 cvisb:Patient
  "@type":               rdfs:Class
  rdfs:comment:          A schema describing a Patient/Person in the Center for Viral Systems Biology experiments
  rdfs:label:            Patient
  rdfs:subClassOf:
    "@id":               health:Patient
  schema:isPartOf:
    "@id":               https://schema.cvisb.org
  validation:
    required:
      - patientID
      - cohort
      - outcome
      - country
    patientID:
      type:              string
      default:           true
    alternateIdentifier:
      type:              array
      minItems:          0
      default:           true
    cohort:
      type:              string
      enum:
        - Ebola
        - Lassa
        - control
    outcome:
      type:              string
      enum:
        - control
        - survivor
        - contact
        - dead
        - unknown
    country:
      type:              string
      enum:
        - SL
        - NG
        - unknown
    homeLocation:
      type:              string
    admitDate:
      type:              date
    infectionDate:
      type:              date
    daysOnset:
      type:              integer
    deathDate:
      type:              date
    gender:
      type:              string
      enum:
        - Male
        - Female
        - Unknown
    relatedTo:
      type:              array
    age:
      type:              integer
      minimum:           1
      maximum:           100
    associatedSamples:
      type:              array
      minItems:          0


# identifier
- "@id":                 cvisb:patientID
  "@type":               rdf:Property
  rdfs:comment:          Unique ID for patient (G-number, S-number, or C-number)
  rdfs:label:            patientID
  schema:domainIncludes:
    - "@id":             cvisb:Patient
  schema:rangeIncludes:
    - "@id":             schema:Text
  schema:sameAs:
    "@id":               schema:identifier
  owl:cardinality:       one
  marginality:           required

# alternate identifier
- "@id":                 cvisb:alternateIdentifier
  "@type":               rdf:Property
  rdfs:comment:          Alternative ID used for patient
  rdfs:label:            alternateIdentifier
  schema:domainIncludes:
    - "@id":             cvisb:Patient
  schema:rangeIncludes:
    - "@id":             schema:Text
  owl:cardinality:       many
  marginality:           optional

# Main cohort
- "@id":                 cvisb:cohort
  "@type":               rdf:Property
  rdfs:comment:          "Cohort for virus exposure: Ebola, Lassa, or Control"
  rdfs:label:            cohort
  schema:domainIncludes:
    - "@id":             cvisb:Patient
  schema:rangeIncludes:
    - "@id":             schema:Text
  owl:cardinality:       one
  marginality:           required
  schema:Enumeration:
                         - Ebola
                         - Lassa
                         - control

# Outcome cohort
- "@id":                 cvisb:outcome
  "@type":               rdf:Property
  rdfs:comment:          "Outcome for patient: control, survivor, contact, dead"
  rdfs:label:            outcome
  schema:domainIncludes:
    - "@id":             cvisb:Patient
  schema:rangeIncludes:
    - "@id":             schema:Text
  owl:cardinality:       one
  marginality:           required
  schema:Enumeration:
                         - control
                         - survivor
                         - contact
                         - dead
                         - unknown

# geographic location (country)
- "@id":                 cvisb:country
  "@type":               rdf:Property
  rdfs:comment:          Country where Patient lives / was treated
  rdfs:label:            Country
  schema:domainIncludes:
    - "@id":             cvisb:Patient
  schema:rangeIncludes:
    - "@id":             cvisb:Country
  schema:sameAs:
    "@id":               schema:geographicArea
  owl:cardinality:       one
  marginality:           required

# household location
- "@id":                 cvisb:homeLocation
  "@type":               rdf:Property
  rdfs:comment:          A contact location for a person's residence. Should include country (Administrative Unit 0), district (Administrative Unit 2), chiefdom (Administrative Unit 3), Village + displaced GPS coordinates (optional)
  rdfs:label:            homeLocation
  schema:domainIncludes:
    - "@id":             cvisb:Patient
  schema:rangeIncludes:
    - "@id":             cvisb:AdministrativeArea
    - "@id":             cvisb:Place
  schema:sameAs:
    "@id":               schema:homeLocation
  owl:cardinality:       many
  marginality:           recommended

# date of admission
- "@id":                 cvisb:admitDate
  "@type":               rdf:Property
  rdfs:comment:          Date of admission
  rdfs:label:            admitDate
  schema:domainIncludes:
    - "@id":             cvisb:Patient
  schema:rangeIncludes:
    - "@id":             schema:Date
  owl:cardinality:       one
  marginality:           optional

# Approximate date of infection
- "@id":                 cvisb:infectionDate
  "@type":               rdf:Property
  rdfs:comment:          Approximate date (year) of infection or contact with the virus. Based on self-reporting, so take it with a grain of salt.
  rdfs:label:            infectionDate
  schema:domainIncludes:
    - "@id":             cvisb:Patient
  schema:rangeIncludes:
    - "@id":             schema:Date
  owl:cardinality:       one
  marginality:           optional

# time from onset of symptoms
- "@id":                 cvisb:daysOnset
  "@type":               rdf:Property
  rdfs:comment:          Number of days between onset of symptoms and hospital admission
  rdfs:label:            daysOnset
  schema:domainIncludes:
    - "@id":             cvisb:Patient
  schema:rangeIncludes:
    - "@id":             schema:Integer
  owl:cardinality:       one
  marginality:           optional

# death
- "@id":                 cvisb:deathDate
  "@type":               rdf:Property
  rdfs:comment:          Date of death
  rdfs:label:            deathDate
  schema:domainIncludes:
    - "@id":             cvisb:Patient
  schema:rangeIncludes:
    - "@id":             schema:Date
  schema:sameAs:
    "@id":               schema:deathDate
  owl:cardinality:       one
  marginality:           optional

# gender
- "@id":                 cvisb:gender
  "@type":               rdf:Property
  rdfs:comment:          Gender
  rdfs:label:            gender
  schema:domainIncludes:
    - "@id":             cvisb:Patient
  schema:rangeIncludes:
    - "@id":             schema:GenderType
  schema:sameAs:
    "@id":               schema:gender
  owl:cardinality:       one
  marginality:           recommended
  schema:Enumeration:
                         - Male
                         - Female
                         - Unknown

# contacts:
- "@id":                 cvisb:relatedTo
  "@type":               rdf:Property
  rdfs:comment:          A list of related household contacts's patientIDs
  rdfs:label:            relatedTo
  schema:domainIncludes:
    - "@id":             schema:Text
  schema:rangeIncludes:
    - "@id":             schema:Text
  owl:cardinality:       many
  marginality:           optional

# age
- "@id":                 cvisb:age
  "@type":               rdf:Property
  rdfs:comment:          Age at time of first presentation
  rdfs:label:            age
  schema:domainIncludes:
    - "@id":             cvisb:Patient
  schema:rangeIncludes:
    - "@id":             schema:Integer
  owl:cardinality:       one
  marginality:           recommended
  minimum:               1
  maximum:               100


# sample IDs
- "@id":                 cvisb:associatedSamples
  "@type":               rdf:Property
  rdfs:comment:          List of Sample IDs associated with the patient
  rdfs:label:            associatedSamples
  schema:domainIncludes:
    - "@id":             cvisb:Patient
  schema:rangeIncludes:
    - "@id":             xsd:string
    - "@id":             schema:Text
  owl:cardinality:       many
  marginality:           recommended

  # Merged data: availableData
- "@id":                 cvisb:availableData
  "@type":               rdf:Property
  rdfs:comment:          List of available data and results (where known) for the patient
  rdfs:label:            availableData
  schema:domainIncludes:
    - "@id":             cvisb:Patient
  schema:rangeIncludes:
    - "@id":             cvisb:ExperimentData
  owl:cardinality:       many
  marginality:           recommended

# ELISAs
- "@id":                 cvisb:elisa
  "@type":               rdf:Property
  rdfs:comment:          List of ELISA results (IgG, IgM, Ag for Ebola/Lassa antigen) for the patient
  rdfs:label:            elisa
  schema:domainIncludes:
    - "@id":             cvisb:Patient
  schema:rangeIncludes:
    - "@id":             cvisb:ELISA
  owl:cardinality:       many
  marginality:           recommended

# RDT:                   rapid diagnostic tests
- "@id":                 cvisb:rapidDiagostics
  "@type":               rdf:Property
  rdfs:comment:          List of rapid Ebola/Lassa dipstick diagnostic results for the patient
  rdfs:label:            rapidDiagostics
  schema:domainIncludes:
    - "@id":             cvisb:Patient
  schema:rangeIncludes:
    - "@id":             cvisb:RDT
  owl:cardinality:       many
  marginality:           recommended

# RT-PCR
- "@id":                 cvisb:rtpcr
  "@type":               rdf:Property
  rdfs:comment:          List of RT-PCR results for the patient
  rdfs:label:            rtpcr
  schema:domainIncludes:
    - "@id":             cvisb:Patient
  schema:rangeIncludes:
    - "@id":             cvisb:RTPCR
  owl:cardinality:       many
  marginality:           recommended
